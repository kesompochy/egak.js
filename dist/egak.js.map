{"version":3,"file":"egak.js","mappings":"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","sources":["webpack://EGAK/webpack/universalModuleDefinition","webpack://EGAK/./src/renderer/shader_sources/fragment_shader_source.glsl","webpack://EGAK/./src/renderer/shader_sources/vertex_shader_source.glsl","webpack://EGAK/./src/app/application.ts","webpack://EGAK/./src/display/abstract_display_object.ts","webpack://EGAK/./src/display/sprite.ts","webpack://EGAK/./src/display/stage.ts","webpack://EGAK/./src/display/text.ts","webpack://EGAK/./src/index.ts","webpack://EGAK/./src/loader/loader.ts","webpack://EGAK/./src/matrix/index.ts","webpack://EGAK/./src/renderer/glutils/alpha.ts","webpack://EGAK/./src/renderer/glutils/buffer.ts","webpack://EGAK/./src/renderer/glutils/canvas.ts","webpack://EGAK/./src/renderer/glutils/index.ts","webpack://EGAK/./src/renderer/glutils/program.ts","webpack://EGAK/./src/renderer/glutils/texture.ts","webpack://EGAK/./src/renderer/glutils/uniform.ts","webpack://EGAK/./src/renderer/renderer.ts","webpack://EGAK/./src/static/context.ts","webpack://EGAK/./src/static/resolution.ts","webpack://EGAK/./src/texture/texture.ts","webpack://EGAK/webpack/bootstrap","webpack://EGAK/webpack/runtime/define property getters","webpack://EGAK/webpack/runtime/hasOwnProperty shorthand","webpack://EGAK/webpack/runtime/make namespace object","webpack://EGAK/webpack/before-startup","webpack://EGAK/webpack/startup","webpack://EGAK/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"EGAK\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EGAK\"] = factory();\n\telse\n\t\troot[\"EGAK\"] = factory();\n})(self, function() {\nreturn ","export default \"#version 300 es\\r\\nprecision highp float;\\r\\n\\r\\nin vec2 v_texcoord;\\r\\n\\r\\nuniform sampler2D u_texture;\\r\\n\\r\\nuniform float u_opacity;\\r\\n\\r\\nout vec4 outColor;\\r\\n\\r\\nvoid main() {\\r\\n   outColor = texture(u_texture, v_texcoord) * vec4(1, 1, 1, u_opacity);\\r\\n}\";","export default \"#version 300 es\\r\\n \\r\\nin vec2 a_position;\\r\\nin vec2 a_texcoord;\\r\\n \\r\\nuniform mat3 u_transformation;\\r\\n \\r\\nout vec2 v_texcoord;\\r\\n \\r\\nvoid main() {\\r\\n   v_texcoord = a_texcoord;\\r\\n\\r\\n   gl_Position = vec4((u_transformation * vec3(a_position, 1)).xy, 0, 1);\\r\\n}\";","import Renderer from '../renderer/renderer';\r\nimport Stage from '../display/stage';\r\nimport Loader from '../loader/loader';\r\nimport Resolution from '../static/resolution';\r\nimport { twoDemensionParam } from '../display/abstract_display_object';\r\n\r\ninterface IAppOption {\r\n    width?: number;\r\n    height?: number;\r\n    canvas?: HTMLCanvasElement;\r\n    autoStyleCanvas?: boolean;\r\n}\r\n\r\nconst AppDefaultOption = {\r\n    width: 300,\r\n    height: 150,\r\n    canvas: document.createElement('canvas'),\r\n    autoStyleCanvas: false,\r\n}\r\n\r\nexport interface IResolution {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport const defaultResolution: IResolution = {\r\n    x: 1, y: 1\r\n};\r\n\r\nexport default class App {\r\n    renderer: Renderer;\r\n    baseStage: Stage = new Stage();\r\n    loader: any = Loader;\r\n    private _canvas: HTMLCanvasElement;\r\n    screenSize: {width: number, height: number};\r\n    constructor(options?: IAppOption){\r\n        if(!options) options = AppDefaultOption;\r\n\r\n        const width = options.width || AppDefaultOption.width;\r\n        const height = options.height || AppDefaultOption.height;\r\n        const canvas = options.canvas || AppDefaultOption.canvas;\r\n        const autoStyleCanvas = options.autoStyleCanvas || AppDefaultOption.autoStyleCanvas;\r\n\r\n        this._canvas = canvas;\r\n        if(autoStyleCanvas){\r\n            this._canvas.style.width = `${width}px`;\r\n            this._canvas.style.height = `${height}px`;\r\n        }\r\n\r\n        this.screenSize = {width: width, height: height};\r\n\r\n        this.renderer = new Renderer({canvas: canvas, width: this.screenSize.width, height: this.screenSize.height});\r\n\r\n        Resolution.x = this._resolutionX;\r\n        Resolution.y = this._resolutionY;\r\n    }\r\n\r\n    set width(value: number){\r\n        this.screenSize.width = value;\r\n        this.renderer.width = value;\r\n        Resolution.x = this._resolutionX;\r\n    }\r\n    set height(value: number){\r\n        this.screenSize.height = value;\r\n        this.renderer.height = value;\r\n        Resolution.y = this._resolutionY;\r\n    }\r\n\r\n    private get _resolutionX(): number{\r\n        return this._canvas.width/this.screenSize.width*this.renderer.resolution;\r\n    }\r\n    private get _resolutionY(): number{\r\n        return this._canvas.height/this.screenSize.height*this.renderer.resolution;\r\n    }\r\n\r\n    render(): void{\r\n        this.renderer.render(this.baseStage);\r\n\r\n        this.renderer.flush();\r\n    }\r\n    clearScreen(r: number = 0, g: number = 0, b: number = 0, a?: number): void{\r\n        this.renderer.clear(r, g, b, a);\r\n    }\r\n}","import Texture from '../texture/texture'\r\n\r\n\r\nexport class twoDemensionParam {\r\n    _x: number = 1;\r\n    _y: number = 1;\r\n    set x(value: number){\r\n        this._x = value;\r\n    }\r\n    set y(value: number){\r\n        this._y = value;\r\n    }\r\n    get x(): number{\r\n        return this._x;\r\n    }\r\n    get y(): number{\r\n        return this._y;\r\n    }\r\n    set(x: number, y?: number): void{\r\n        this._x = x;\r\n        this._y = y ? y : x;\r\n    }\r\n}\r\n\r\nexport default abstract class AbstractDisplayObject {\r\n    texture: Texture | undefined;\r\n    private _position: twoDemensionParam = new twoDemensionParam();\r\n    private _opacity: number = 1;\r\n    private _scale: twoDemensionParam = new twoDemensionParam();\r\n    set opacity(value: number){\r\n        this._opacity = Math.min(Math.max(value, 0), 1);\r\n    }\r\n    get opacity(): number{\r\n        return this._opacity;\r\n    }\r\n    rotation: number = 0;\r\n    get position(): twoDemensionParam{\r\n        return this._position;\r\n    }\r\n    get scale(): twoDemensionParam{\r\n        return this._scale;\r\n    }\r\n}","import Texture from '../texture/texture';\r\nimport Renderer from '../renderer/renderer';\r\nimport Stage from './stage';\r\n\r\n\r\n\r\nexport default class Sprite extends Stage{\r\n    texture: Texture | undefined;\r\n    \r\n    constructor(texture?: Texture){\r\n        super();\r\n        if(texture) this.texture = texture;\r\n    }\r\n\r\n}","import AbstractDisplayObject from './abstract_display_object';\r\n\r\nimport { twoDemensionParam } from './abstract_display_object';\r\n\r\nimport * as m3 from '../matrix';\r\n\r\n\r\n\r\nexport default class Stage extends AbstractDisplayObject{\r\n    anchor: twoDemensionParam = new twoDemensionParam();\r\n    transform: Array<number> = m3.identity();\r\n    parentTransform: Array<number> = m3.identity();\r\n    parentOpacity: number = 1;\r\n    parent: Stage | undefined = undefined;\r\n\r\n    children: Array<Stage> = [];\r\n    calcRenderingInfos(): void{\r\n        this.transform = this._calculateTransform();\r\n        this.parentTransform = this._calculateParentTransform();\r\n        this.parentOpacity = this._calculateParentOpacity();\r\n    }\r\n    addChild(obj: Stage): Stage{\r\n        this.children.push(obj);\r\n        obj.parent = this;\r\n        return this;\r\n    }\r\n    private _calculateTransform(): Array<number>{\r\n        const position = m3.translation(this.position.x, this.position.y);\r\n        const scaling = m3.scaling(this.scale.x, this.scale.y);\r\n        const rotation = m3.rotation(this.rotation);\r\n        const anchor = m3.translation(-this.anchor.x, -this.anchor.y);\r\n\r\n        const transform = m3.someMultiply(position, rotation, scaling, anchor);\r\n\r\n        return transform;\r\n    }\r\n    private _calculateParentTransform(): Array<number>{\r\n        if(this.parent) {\r\n            return m3.multiply(this.parent.parentTransform, this.parent.transform);\r\n        } else {\r\n            return m3.identity();\r\n        }\r\n    }\r\n    private _calculateParentOpacity(): number{\r\n        if(this.parent){\r\n            return this.parent.parentOpacity * this.parent.opacity;\r\n        } else{\r\n            return 1;\r\n        }\r\n    }\r\n\r\n    set x(value: number){\r\n        this.position.x = value;\r\n    }\r\n    set y(value: number){\r\n        this.position.y = value;\r\n    }\r\n    get x(): number {\r\n        return this.position.x;\r\n    }\r\n    get y(): number {\r\n        return this.position.y;\r\n    }\r\n}","import Sprite from './sprite';\r\n\r\nimport Texture from '../texture/texture';\r\n\r\nimport { IResolution } from '../app/application';\r\n\r\nimport Resolution from '../static/resolution';\r\n\r\nimport { SCALE_MODE } from '../texture/texture';\r\n\r\nexport interface ITextStyle  {\r\n    font: string;\r\n    fontSize: number;\r\n    fill: string;\r\n    strokeWidth: number;\r\n    stroke: string;\r\n    shadow: string;\r\n    shadowX: number;\r\n    shadowY: number;\r\n    shadowBlur: number;\r\n};\r\n\r\nconst defaultTextStyle: ITextStyle = {\r\n    font: 'sans-serif',\r\n    fontSize: 20,\r\n    fill: '#f00',\r\n    strokeWidth: 0,\r\n    stroke: '#000',\r\n    shadow: '',\r\n    shadowX: 1,\r\n    shadowY: 1,\r\n    shadowBlur: 0\r\n};\r\n\r\n\r\n\r\n\r\nexport default class Text extends Sprite {\r\n    texture: Texture;\r\n    private _text: string = \"\";\r\n    private _style: ITextStyle;\r\n    private _canvas: HTMLCanvasElement = document.createElement('canvas')\r\n    private _resolution: IResolution = Resolution;\r\n    constructor(text?: string, style?: ITextStyle){\r\n        super();\r\n\r\n        this._text = text || '';\r\n        style = style || defaultTextStyle;\r\n        this._style = style;\r\n        for(let styleName in defaultTextStyle){\r\n            this._style[styleName] = style[styleName] || defaultTextStyle[styleName];\r\n        }\r\n        \r\n        this.texture = new Texture(undefined, SCALE_MODE.LINEAR);\r\n        this.updateCanvasTexture();\r\n    }\r\n    private _drawCanvas(){\r\n        const canvas = this._canvas;\r\n        const cxt = canvas.getContext('2d')!;\r\n\r\n        const style = this._style;\r\n        const text = this._text;\r\n\r\n        canvas.width = 2;\r\n        canvas.height = 2;\r\n\r\n        cxt.font = `${style.fontSize}px ${style.font}`;\r\n        cxt.textBaseline = 'top';\r\n\r\n        const textData = cxt.measureText(text);\r\n        const textWidth = textData.width + (style.shadow ? style.shadowX : 0);\r\n        const textHeight = textData.actualBoundingBoxDescent - textData.actualBoundingBoxAscent + (style.shadow ? style.shadowY : 0);\r\n        canvas.width = textWidth*this._resolution.x;\r\n        canvas.height = textHeight*this._resolution.y;\r\n\r\n        cxt.scale(this._resolution.x, this._resolution.y);\r\n\r\n        cxt.clearRect(0, 0, canvas.width, canvas.height);\r\n        \r\n        cxt.beginPath();\r\n        if(style.shadow){\r\n            cxt.shadowOffsetX = style.shadowX;\r\n            cxt.shadowOffsetY = style.shadowY;\r\n            cxt.shadowBlur = style.shadowBlur;\r\n            cxt.shadowColor = style.shadow;\r\n        }\r\n        cxt.font = `${style.fontSize}px ${style.font}`;\r\n        cxt.textBaseline = 'top';\r\n        cxt.fillStyle = style.fill;\r\n        cxt.fillText(text, 0, 0);\r\n        cxt.closePath();\r\n\r\n        cxt.beginPath();\r\n        if(style.strokeWidth){\r\n            cxt.shadowOffsetX = 0;\r\n            cxt.shadowOffsetY = 0;\r\n            cxt.lineWidth = style.strokeWidth;\r\n            cxt.strokeStyle = style.stroke;\r\n            cxt.strokeText(text, 0, 0);\r\n        }\r\n\r\n        this.texture.scale.x = 1/this._resolution.x;\r\n        this.texture.scale.y = 1/this._resolution.y;\r\n    }\r\n\r\n    get text(): string{\r\n        return this._text;\r\n    }\r\n    set text(text: string){\r\n        this._text = text;\r\n        this.updateCanvasTexture();\r\n    }\r\n    updateCanvasTexture(): void{\r\n        this._drawCanvas();\r\n        this.texture.texture = this._canvas;\r\n    }\r\n\r\n    get style(): ITextStyle{\r\n        return this._style;\r\n    }\r\n}","import App from './app/application'\r\nimport Sprite from './display/sprite';\r\nimport Texture from './texture/texture';\r\nimport Stage from './display/stage';\r\nimport Text from './display/text';\r\n\r\nexport { App, Sprite, Texture, Stage, Text }; ","export default class Loader {\r\n    static resources: Map<string, any> = new Map();\r\n    static tasks: Array<Promise<unknown>> = [];\r\n    private static _loadThen: Function = function(){};\r\n    constructor(){\r\n    }\r\n    static add(id: string, src: string): Loader{\r\n        const promise = this._promiseLoadingImage(id, src);\r\n        this.tasks.push(promise);\r\n        \r\n        return this;\r\n    }\r\n    static loadAll(): void{\r\n        Promise.all(this.tasks)\r\n            .then(()=>{this._loadThen();});\r\n    }\r\n    private static _promiseLoadingImage(id: string, src: string): Promise<any>{\r\n        const promise = new Promise((resolve)=>{\r\n            fetch(src).then(res=>res.blob())\r\n                    .then(blob=>createImageBitmap(blob))\r\n                    .then(data=>this.resources.set(id, data))\r\n                    .then(img=>resolve(img));\r\n        });\r\n        return promise;\r\n    }\r\n    static loadThen(func: Function){\r\n        this._loadThen = func;\r\n    }\r\n\r\n    static get(id: string): WebGLTexture{\r\n        return this.resources.get(id);\r\n    }\r\n}","function projection(width: number, height: number){\r\n    return [\r\n        2/width, 0, 0,\r\n        0, -2/height, 0,\r\n        -1, 1, 1\r\n    ];\r\n}\r\n\r\nfunction scaling(x: number, y: number) {\r\n    return [\r\n        x, 0, 0,\r\n        0, y, 0,\r\n        0, 0, 1\r\n    ];\r\n};\r\n\r\nfunction translation(x: number, y: number){\r\n    return [\r\n        1, 0, 0,\r\n        0, 1, 0,\r\n        x, y, 1\r\n    ];\r\n}\r\n\r\nfunction rotation(angle: number){\r\n    const sin = Math.sin(angle);\r\n    const cos = Math.cos(angle);\r\n    return [\r\n        cos, -sin, 0,\r\n        sin,  cos, 0,\r\n        0,     0,  1\r\n    ];\r\n}\r\n\r\nfunction multiply(a: Array<number>, b: Array<number>): Array<number> {\r\n    var a00 = a[0 * 3 + 0];\r\n    var a01 = a[0 * 3 + 1];\r\n    var a02 = a[0 * 3 + 2];\r\n    var a10 = a[1 * 3 + 0];\r\n    var a11 = a[1 * 3 + 1];\r\n    var a12 = a[1 * 3 + 2];\r\n    var a20 = a[2 * 3 + 0];\r\n    var a21 = a[2 * 3 + 1];\r\n    var a22 = a[2 * 3 + 2];\r\n    var b00 = b[0 * 3 + 0];\r\n    var b01 = b[0 * 3 + 1];\r\n    var b02 = b[0 * 3 + 2];\r\n    var b10 = b[1 * 3 + 0];\r\n    var b11 = b[1 * 3 + 1];\r\n    var b12 = b[1 * 3 + 2];\r\n    var b20 = b[2 * 3 + 0];\r\n    var b21 = b[2 * 3 + 1];\r\n    var b22 = b[2 * 3 + 2];\r\n    return [\r\n        b00 * a00 + b01 * a10 + b02 * a20,\r\n        b00 * a01 + b01 * a11 + b02 * a21,\r\n        b00 * a02 + b01 * a12 + b02 * a22,\r\n        b10 * a00 + b11 * a10 + b12 * a20,\r\n        b10 * a01 + b11 * a11 + b12 * a21,\r\n        b10 * a02 + b11 * a12 + b12 * a22,\r\n        b20 * a00 + b21 * a10 + b22 * a20,\r\n        b20 * a01 + b21 * a11 + b22 * a21,\r\n        b20 * a02 + b21 * a12 + b22 * a22,\r\n    ];\r\n}\r\n\r\nfunction someMultiply(...mat: Array<Array<number>>): Array<number>{\r\n    let tmp = mat[0];\r\n    for(let i=0, len=mat.length-1;i<len;i++){\r\n        tmp = multiply(tmp, mat[i+1]);\r\n    }\r\n    return tmp;\r\n}\r\n\r\nfunction identity(): Array<number>{\r\n    return [\r\n        1, 0, 0,\r\n        0, 1, 0,\r\n        0, 0, 1\r\n    ];\r\n}\r\n\r\nexport {projection, scaling, translation, rotation, multiply, someMultiply, identity};","export function enableAlpha(gl: WebGL2RenderingContext){\r\n    gl.enable(gl.BLEND);\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\r\n}","function  createBuffer(gl: WebGL2RenderingContext, type: number, ary: any): WebGLBuffer{\r\n    const buffer = gl.createBuffer()!;\r\n    gl.bindBuffer(type, buffer);\r\n    gl.bufferData(type, ary, gl.STATIC_DRAW);\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n    return buffer;\r\n}\r\n\r\nexport function createLinkedVertexBuffer(gl: WebGL2RenderingContext, program: WebGLProgram, positionAttribName: string, coordAttribName: string){\r\n    const positionAttribLocation = gl.getAttribLocation(program, positionAttribName);\r\n    const texcoordAttribLocation = gl.getAttribLocation(program, coordAttribName);\r\n    gl.enableVertexAttribArray(positionAttribLocation);\r\n    gl.enableVertexAttribArray(texcoordAttribLocation);\r\n\r\n    const positionSize = 2;\r\n    const textureSize = 2;\r\n    const type = gl.FLOAT;\r\n    const normalize = false;\r\n    const stride = Float32Array.BYTES_PER_ELEMENT * (positionSize + textureSize);\r\n    const offset = Float32Array.BYTES_PER_ELEMENT * positionSize;\r\n\r\n    const vertexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n    gl.vertexAttribPointer(positionAttribLocation, positionSize, type, normalize, stride, 0);\r\n    gl.vertexAttribPointer(texcoordAttribLocation, textureSize, type, normalize, stride, offset);\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n    return vertexBuffer!;\r\n}\r\n\r\nexport function createRectangleIndices(gl: WebGL2RenderingContext){\r\n    const indices = new Uint16Array(\r\n        [0, 1, 2, \r\n         1, 3, 2]);\r\n    const indexBuffer = createBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, indices);\r\n    return indexBuffer;\r\n}","export function clearCanvas(gl: WebGL2RenderingContext, color: {r: number, g: number, b: number, a?: number}){\r\n    const colorByte = 256;\r\n\r\n    const r = color.r/colorByte;\r\n    const g = color.g/colorByte;\r\n    const b = color.b/colorByte;\r\n    const a = color.a === undefined ? 1 : color.a;\r\n    gl.clearColor(r, g, b, a);\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n}\r\n\r\nexport function resizeCanvas(gl: WebGL2RenderingContext, resolution: number){\r\n    const canvas = gl.canvas;\r\n    const styleWidth = canvas.clientWidth;\r\n    const styleHeight = canvas.clientHeight;\r\n\r\n    canvas.width = styleWidth * resolution;\r\n    canvas.height = styleHeight * resolution;\r\n\r\n    gl.viewport(0, 0, canvas.width, canvas.height);\r\n}","import { createProgram } from './program';\r\nimport { createLinkedVertexBuffer, createRectangleIndices } from './buffer';\r\nimport {createTexture, uploadTexture} from './texture';\r\nimport { enableAlpha } from './alpha';\r\nimport { clearCanvas, resizeCanvas } from './canvas';\r\nimport { getUniformLocation } from './uniform';\r\n\r\nexport { createProgram, \r\n        createRectangleIndices, createLinkedVertexBuffer,\r\n        createTexture, uploadTexture, \r\n        enableAlpha,\r\n        clearCanvas, resizeCanvas, \r\n        getUniformLocation\r\n};","function createShader(gl: WebGLRenderingContext, type: number, src: string): WebGLShader{\r\n    const shader = gl.createShader(type);\r\n    if(!shader){\r\n        throw new Error('failed to create a shader');\r\n    }\r\n    gl.shaderSource(shader, src);\r\n    gl.compileShader(shader);\r\n\r\n    if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)){\r\n        console.log(gl.getShaderInfoLog(shader));\r\n        gl.deleteShader(shader);\r\n    }\r\n\r\n    return shader;\r\n\r\n    \r\n}\r\n\r\n\r\nfunction createLinkedProgram(gl: WebGL2RenderingContext, ...shaders: WebGLShader[]): WebGLProgram{\r\n    const program = gl.createProgram();\r\n    if(!program){\r\n        throw new Error('failed to create program');\r\n    }\r\n\r\n    for(let i=0, len=shaders.length;i<len;i++){\r\n        gl.attachShader(program, shaders[i]);\r\n    }\r\n    gl.linkProgram(program);\r\n\r\n    if(!gl.getProgramParameter(program, gl.LINK_STATUS)){\r\n        console.log(gl.getProgramInfoLog(program));\r\n        gl.deleteProgram(program);\r\n    }\r\n\r\n    return program;\r\n    \r\n}\r\n\r\n\r\nexport function createProgram(gl: WebGL2RenderingContext, vSource: string, fSource: string){\r\n    const vShader = createShader(gl, gl.VERTEX_SHADER, vSource);\r\n    const fShader = createShader(gl, gl.FRAGMENT_SHADER, fSource);\r\n    const program = createLinkedProgram(gl, vShader, fShader);\r\n\r\n    return program;\r\n}","import { TextureOriginalImage } from '../../texture/texture';\r\n\r\nexport function createTexture(gl: WebGL2RenderingContext, param: string): WebGLTexture{\r\n    const texture = gl.createTexture()!;\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl[param]);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl[param]);\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, null);\r\n\r\n    return texture;\r\n}\r\n\r\nexport function uploadTexture(gl: WebGL2RenderingContext, texture: WebGLTexture, img: TextureOriginalImage): WebGLTexture{;\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\r\n    gl.generateMipmap(gl.TEXTURE_2D);\r\n    gl.bindTexture(gl.TEXTURE_2D, null);\r\n\r\n    return texture;\r\n}\r\n\r\n","export function getUniformLocation(gl: WebGL2RenderingContext, program: WebGLProgram, uniformName: string){\r\n    return gl.getUniformLocation(program, uniformName)!;\r\n}","import Sprite from '../display/sprite';\r\nimport Stage from '../display/stage';\r\nimport Context from '../static/context';\r\nimport Texture from '../texture/texture';\r\n\r\nimport vShaderSource from './shader_sources/vertex_shader_source.glsl';\r\nimport fShaderSource from './shader_sources/fragment_shader_source.glsl';\r\nimport * as glutils from './glutils';\r\n\r\nimport * as m3 from '../matrix';\r\n\r\n\r\ninterface IRendererParams{\r\n    canvas: HTMLCanvasElement;\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\n\r\n\r\nconst uniformPrefix = 'u_';\r\n\r\nexport default class Renderer{\r\n    canvas: HTMLCanvasElement;\r\n    gl: WebGL2RenderingContext;\r\n    private _textureUniformLocation: WebGLUniformLocation;\r\n    private _indexBuffer: WebGLBuffer;\r\n    private _vertexBuffer: WebGLBuffer;\r\n    resolution: number = window.devicePixelRatio || 1;\r\n    private _screenSize: {width: number, height: number};\r\n    private _program: WebGLProgram;\r\n\r\n    private _transformUniformLocation: WebGLUniformLocation;\r\n    private _opacityUniformLocation: WebGLUniformLocation;\r\n    constructor(params: IRendererParams){\r\n\r\n\r\n        const {canvas, width, height} = params;\r\n\r\n        this.canvas = canvas;\r\n\r\n        this._screenSize = {width: width!, height: height!};\r\n        \r\n        this.gl = this.canvas.getContext('webgl2')!;\r\n        const gl = this.gl;\r\n        Context.gl = gl;\r\n\r\n        this.resizeCanvas();\r\n\r\n        //alpha有効化\r\n        glutils.enableAlpha(gl);\r\n\r\n        //glの準備\r\n        const program = glutils.createProgram(gl, vShaderSource, fShaderSource);\r\n        this._program = program;\r\n\r\n        this._indexBuffer = glutils.createRectangleIndices(gl);\r\n        this._vertexBuffer = glutils.createLinkedVertexBuffer(gl, program, 'a_position', 'a_texcoord');\r\n    \r\n        this._transformUniformLocation = glutils.getUniformLocation(gl, program, uniformPrefix+'transformation');\r\n        this._opacityUniformLocation = glutils.getUniformLocation(gl, program, uniformPrefix+'opacity');\r\n        \r\n        this._textureUniformLocation = glutils.getUniformLocation(gl, program, uniformPrefix+'texture');\r\n    }\r\n\r\n    clear(r: number, g: number, b: number, a?: number): void{\r\n        glutils.clearCanvas(this.gl, {r: r, g: g, b: b, a: a});\r\n    }\r\n    resizeCanvas(){\r\n        glutils.resizeCanvas(this.gl, this.resolution);\r\n    }\r\n    set width(value: number){\r\n        this._screenSize.width = value;\r\n    }\r\n    set height(value: number){\r\n        this._screenSize.height = value;\r\n    }\r\n\r\n    flush(): void{\r\n        this.gl.flush();\r\n    }\r\n\r\n    render(obj: Stage): void{\r\n        obj.calcRenderingInfos();\r\n\r\n        const texture = obj.texture;\r\n        if(texture){\r\n            this.renderSprite(obj);\r\n        }\r\n\r\n        const children = obj.children;\r\n        for(let i=0, len=children.length;i<len;i++){\r\n            this.render(children[i]);\r\n        }\r\n    }\r\n\r\n    renderSprite(sprite: Stage): void{\r\n        const texture = sprite.texture;\r\n        if(!texture){\r\n            return;\r\n        }\r\n\r\n        const glTexture = texture.glTexture!;\r\n\r\n        const gl = this.gl;\r\n        const textureUniformLocation = this._textureUniformLocation;\r\n\r\n        gl.useProgram(this._program);\r\n\r\n        const textureUnitID = 0;\r\n        gl.uniform1i(textureUniformLocation, textureUnitID);\r\n        gl.activeTexture(gl.TEXTURE0 + textureUnitID);\r\n        gl.bindTexture(gl.TEXTURE_2D, glTexture);\r\n\r\n        const projection= m3.projection(this._screenSize.width, this._screenSize.height);\r\n        const textureScaling = m3.scaling(texture.scale.x, texture.scale.y);\r\n        const transformation = m3.someMultiply(projection, sprite.parentTransform, sprite.transform, textureScaling);\r\n        gl.uniformMatrix3fv(this._transformUniformLocation, false, transformation);\r\n\r\n        const opacity = sprite.opacity;\r\n        const worldOpacity = sprite.parentOpacity;\r\n        const wholeOpacity = worldOpacity*opacity;\r\n        gl.uniform1f(this._opacityUniformLocation, wholeOpacity);\r\n\r\n        const vertexBuffer = this._vertexBuffer;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n\r\n        const textureSize = {w: texture.width, h: texture.height};\r\n\r\n        const vertices = [\r\n            0, 0,\r\n            0, 0,\r\n            0, textureSize.h,\r\n            0, 1,\r\n            textureSize.w, 0,\r\n            1, 0,\r\n            textureSize.w, textureSize.h,\r\n            1, 1\r\n        ];\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.DYNAMIC_DRAW);\r\n        \r\n        const indexBuffer = this._indexBuffer;\r\n        const size = 6;\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n        gl.drawElements(gl.TRIANGLES, size, gl.UNSIGNED_SHORT, 0);\r\n\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n}\r\n","export default class Context{\r\n    static gl: WebGL2RenderingContext | undefined;\r\n    static checkGL(): WebGL2RenderingContext{\r\n        if(Context.gl){\r\n            return Context.gl;\r\n        } else {\r\n            throw new Error('There seems to be no canvas');\r\n        }\r\n    }\r\n}","export default class Resolution {\r\n    static x: number = 1;\r\n    static y: number = 1;\r\n}","\r\nimport Context from '../static/context';\r\nimport * as glutils from '../renderer/glutils';\r\n\r\nexport type TextureOriginalImage = ImageBitmap | HTMLCanvasElement | HTMLImageElement;\r\n\r\nexport enum SCALE_MODE{\r\n    LINEAR = 'LINEAR', \r\n    NEAREST = 'NEAREST'\r\n};\r\n\r\nimport { twoDemensionParam } from '../display/abstract_display_object';\r\n\r\nexport default class Texture {\r\n    glTexture: WebGLTexture;\r\n    width: number = 0;\r\n    height: number = 0;\r\n    _scale: twoDemensionParam = new twoDemensionParam();\r\n    scaleMode: SCALE_MODE = SCALE_MODE.NEAREST;\r\n    constructor(img: TextureOriginalImage | undefined, scaleMode: SCALE_MODE= SCALE_MODE.NEAREST){\r\n        this.scaleMode = scaleMode;\r\n\r\n        const gl = Context.checkGL();\r\n        const texture = glutils.createTexture(gl, scaleMode);\r\n\r\n        if(img){\r\n            this.glTexture =  glutils.uploadTexture(gl, texture, img);\r\n\r\n            this.width = img.width;\r\n            this.height = img.height;\r\n        } else {\r\n            this.glTexture = texture;\r\n        }\r\n        \r\n    }\r\n    set texture(img: TextureOriginalImage){\r\n        const gl = Context.checkGL();\r\n        this.glTexture = glutils.uploadTexture(gl, this.glTexture!, img);\r\n        this.width = img.width;\r\n        this.height = img.height;\r\n    }\r\n\r\n    get scale(): twoDemensionParam{\r\n        return this._scale;\r\n    }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"sourceRoot":""}